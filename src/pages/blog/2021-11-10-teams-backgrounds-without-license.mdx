---
templateKey: blog-post
title: Teams backgrounds without license
date: 2021-11-10T11:07:54.923Z
description: Org-wide backgrounds for Teams appeared in Microsoft 365 Roadmap.
  Here's how to get them today with no additional license.
featuredpost: false
tags:
  - teams
  - powershell
  - group policy
  - intune
---
<Note>

The solution described above is not 100% the same as what Microsoft will be providing, as it only applied to domain-joined Windows devices.

</Note>

In the beginning of 2020 Microsoft added [Microsoft Teams: Org wide backgrounds (Preview)](https://www.microsoft.com/en-us/microsoft-365/roadmap?&searchterms=80193&filters=&searchterms=80193) as Roadmap item 80193. The description says (emphasis mine):

> Organization-wide backgrounds will now be available in preview. **This feature will require an Advanced Communications license** when it becomes generally available.

It's also published as [Message Center entry MC249777](https://admin.microsoft.com/AdminPortal/Home?ref=MessageCenter/:/messages/MC249777).

We're finally getting an option to deploy custom Teams backgrounds to the entire organization. It is very handy idea, which might help people to celebrate and increase visibility of some special events within the organization.

Ok - have we can deploy it?

## Table of Contents

```toc
exclude: [Table of Contents]
```

## Prepare the backgrounds

For any of the options described below, you need to first prepare the backgrounds. Based on Tony Redmond's article [How to Use Background Images and Blurring in Microsoft Teams Meetings](https://office365itpros.com/2020/04/06/teams-meeting-background-image/) the requirements are:

> Microsoft’s recommendations are a minimum size of 360 x 360 pixels (this will not look good) and a maximum of 2048 x 2048 pixels. BMP, JPEG, and PNG formats are allowed.
> Keep in mind the size of the images - if you want to deploy multiple heavy images, it might have impact on performance/network usage. PNGs are usually good choice

## Group Policy file preference

First option is group policy! Knowing where all these custom backgrounds are uploaded in the machines, we can create a policy to put specific files in that folder.

First, create a folder on a network share. Make sure that it's accessible to everyone (it should have at least *Read* permissions):

![Permissions on network folder](../../img/20210412-092312-fmay6h1it3-1-.png "Permissions on network folder")

Now let's create a group policy object. As with all changes, **it's good to roll them out gradually**. We can use [Security Group Filters](https://docs.microsoft.com/en-us/windows/security/threat-protection/windows-firewall/assign-security-group-filters-to-the-gpo).

Our GPO will be applied to users, not to machines. We need to add our files under: *User Configuration => Preferences => Windows Settings => Files*.

We can either add files one-by-one (if we want very granular control):

![Settings of a single file in group policy](../../img/20210412-100328-xdsvvj2gnk-1-.png "Settings of a single file in group policy")

Or with a wildcard (credits to [Copy Files or Folders to All Computers via GPO](http://woshub.com/copy-files-on-all-computers-group-policy/)):

![Settings of wildcard entry in group policy](../../img/20210412-120332-3heprhjzby-1-.png "Settings of wildcard entry in group policy")

In both cases, the action chosen can either be **Create** or **Update**. Do not use **Replace** so that it doesn't replace the files every time GPO is processed. You can read more about that behavior at [Group Policy Preferences – Replace Existing File](https://www.adamfowlerit.com/2016/07/group-policy-preferences-replace-existing-file/).

## Startup script

The more flexible solution than a GPO is a startup script. The main advantage of it is that the script can either [be set via GPO](https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/dn789196(v=ws.11)) or with Intune.

Keep in mind that scripts run via Intune [run only once unless they're changed](https://docs.microsoft.com/en-us/mem/intune/apps/intune-management-extension):

> Once the script executes, it doesn't execute again unless there's a change in the script or policy.

If you're going to specify the list of backgrounds in the script, that's not a problem. In that case, the script is going to re-run every time you add a new file to the list (as the content of the script is changed).

However, if you use an external resource to determine the list of files to be downloaded, you might need a way to trigger the script after the new background is added.

Here's the list of useful community resources for running the script at logon:

* [Simplify Logon scripts in Intune without Scheduled tasks](https://www.lieben.nu/liebensraum/2019/06/simplify-logon-scripts-in-intune-without-schedules/)
* [Intune map network drives and execute PowerShell script on each user logon ](https://tech.nicolonsky.ch/intune-execute-powershell-script-on-each-user-logon/)
* [Logon scripts in Intune](https://larsstaal.com/2019/05/07/logon-scripts-in-intune/)

To the script itself - I've written a simple one to demonstrate the workflow. The steps are:

1. Specify the list of images to be pulled
1. For each image check if it already exists
1. If the image is not yet downloaded, pull it from the link

Here's a part of the script:

```powershell
$imageList = @(
	'https://h2.gifposter.com/bingImages/Dargavs_EN-US4957085337_1920x1080.jpg',
	'https://h2.gifposter.com/bingImages/BulgariaDevilBridge_EN-US4705163344_1920x1080.jpg'
)

$uploadsFolderPath = "$($env:APPDATA)\Microsoft\Teams\Backgrounds\Uploads\"

try {
	foreach ($image in $imageList) {
		$fileName = $image.Split('/')[-1]
		$filePath = Join-Path $uploadsFolderPath $fileName
		if (-not (Test-Path $filePath)) {
			# Download the image
			Invoke-RestMethod -Method Get -Uri $image -OutFile $filePath
		}
	}
} catch {
	$e = $_
	Write-Error $e
}
```

And you can find the full and most up-to-date version on GitHub: [PushTeamsBackground.ps1](https://github.com/robdy/powershell-tools/blob/master/scripts/PushTeamsBackgrounds.ps1?ts=2)

<Tip>

The script I used was heavily inspired by [How to use Bing daily images as custom backgrounds in Microsoft Teams](https://www.onmsft.com/how-to/how-to-use-bing-daily-images-as-custom-backgrounds-in-microsoft-teams) article.

Make sure to check it out if you're looking for some fancy backgrounds. Believe me, it's an ideal conversation starter!

</Tip>

## Limitations

All solutions come with certain limitations:

* no mobile devices - custom backgrounds for them [are still in development](https://www.microsoft.com/en-us/microsoft-365/roadmap?searchterms=82234)

Group policy file solution comes with certain limitations:

* Can only be applied to machines using GPO
* Requires domain controller connection
* No additional logic can be applied (for example, for cleaning up, see [below](#cleaning-up))

Startup script also have some limitations:

* Requires domain controller connectivity if applied via GPO
* Requires Intune license if applied via Intune
* Applying via Intune might cause some headache if you're not specifying the images within a script

## Cleaning up

Each time new background is added to *Uploads* folder, Teams creates thumb image. For example:

```powershell
# For background
winter_background.jpg
# we'll have 
winter_background_thumb.jpg
```

If you plan to do cleanup of legacy backgrounds, remember about these files. There are multiple ways to remove them, depending on which deployment mechanism you use. For group policy - add entries with action **Delete**. For others, add proper logic to your scripts. 

## Final thoughts

Remember, that if you put backgrounds into the folder while Teams client is running, they'll appear next time you launch it.

When cleaning up, don't forget about `_thumb` file created by Teams - they won't be needed.